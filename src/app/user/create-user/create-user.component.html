
<div class="col-md-12">
  <h3>Criar Usuário</h3>
  <div class="col-md-10">
    <form [formGroup]="userForm" (ngSubmit)="save()">
      <div class="form-row">
        <div class="col-md-4 mb-3">
          <label for="name">Nome</label>
          <input type="text" class="form-control" id="name" required
            formControlName="name" name="name">
          <span class="alert text-danger"
            *ngIf="userForm.controls['name'].invalid &&
            (userForm.controls['name'].dirty ||
            userForm.controls['name'].touched)">
            Nome inválido!
          </span>
        </div>
        <div class="col-md-2 mb-3">
          <label for="name">CPF</label>
          <input type="text" class="form-control" id="cpf" required
            formControlName="cpf" cpf [textMask]="{mask: MASKS.cpf.textMask}"
            name="cpf">
          <span class="alert text-danger"
            *ngIf="userForm.controls['cpf'].invalid &&
            (userForm.controls['cpf'].dirty ||
            userForm.controls['cpf'].touched)">
            CPF inválido!
          </span>
        </div>
        <div class="col-md-4 mb-3">
          <label for="name">Email</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"
                id="validationTooltipUsernamePrepend">@</span>
            </div>
            <input type="text" class="form-control" id="email" required
              formControlName="email"
              aria-describedby="validationTooltipUsernamePrepend" name="email">
          </div>
          <span class="alert text-danger"
            *ngIf="userForm.controls['email'].invalid &&
            (userForm.controls['email'].dirty ||
            userForm.controls['email'].touched)">
            Email inválido!
          </span>
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2 mb-3">
          <label for="name">CEP</label>
          <input type="text" class="form-control" id="addressCep"
            (blur)="getAddress()" required formControlName="addressCep"
            [textMask]="{mask: MASKS.cep.textMask}" name="addressCep">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressCep'].invalid &&
            (userForm.controls['addressCep'].dirty ||
            userForm.controls['addressCep'].touched)">
            Cep inválido!
          </span>
        </div>
        <div class="col-md-7 mb-3">
          <label for="name">Logradouro</label>
          <input type="text" class="form-control" id="addressStreet" required
            formControlName="addressStreet" name="addressStreet">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressStreet'].invalid &&
            (userForm.controls['addressStreet'].dirty ||
            userForm.controls['addressStreet'].touched)">
            Campo inválido!
          </span>
        </div>
        <div class="col-md-1 mb-3">
          <label for="name">Número</label>
          <input type="text" class="form-control" id="addressNumber" required
            formControlName="addressNumber" name="addressNumber">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressNumber'].invalid &&
            (userForm.controls['addressNumber'].dirty ||
            userForm.controls['addressNumber'].touched)">
            Campo inválido!
          </span>
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-3 mb-3">
          <label for="name">Bairro</label>
          <input type="text" class="form-control" id="addressNeighborhood"
            required formControlName="addressNeighborhood"
            name="addressNeighborhood">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressNeighborhood'].invalid &&
            (userForm.controls['addressNeighborhood'].dirty ||
            userForm.controls['addressNeighborhood'].touched)">
            Campo inválido!
          </span>
        </div>
        <div class="col-md-3 mb-3">
          <label for="name">Cidade</label>
          <input type="text" class="form-control" id="addressCity" required
            formControlName="addressCity" name="addressCity">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressCity'].invalid &&
            (userForm.controls['addressCity'].dirty ||
            userForm.controls['addressCity'].touched)">
            Campo inválido!
          </span>
        </div>
        <div class="col-md-1 mb-3">
          <label for="name">Estado</label>
          <input type="text" class="form-control" id="addressUf" required
            formControlName="addressUf" name="addressUf">
          <span class="alert text-danger"
            *ngIf="userForm.controls['addressUf'].invalid &&
            (userForm.controls['addressUf'].dirty ||
            userForm.controls['addressUf'].touched)">
            Campo inválido!
          </span>
        </div>
        <div class="row">
          <div class="col-md-12 mb-3">
            <label for="name">Complemento</label>
            <input type="text" class="form-control" id="addressComplement"
              formControlName="addressComplement" name="addressComplement">
            <div class="invalid-tooltip">
              Campo inválido.
            </div>
          </div>
        </div>
        <hr>
        <div class="row col-md-12">
          <div class="col-md-3 mb-3">
            <label for="name">Login</label>
            <div class="input-group">
              <input type="text" class="form-control" id="login" required
                formControlName="login"
                aria-describedby="validationTooltipUsernamePrepend"
                name="login">
              <span class="alert text-danger"
                *ngIf="userForm.controls['login'].invalid &&
                (userForm.controls['login'].dirty ||
                userForm.controls['login'].touched)">
                Campo inválido!
              </span>
            </div>
          </div>
          <div class="col-md-3 mb-3">
            <label for="name">Senha</label>
            <div class="input-group">
              <input type="text" class="form-control" id="password" required
                formControlName="password"
                aria-describedby="validationTooltipUsernamePrepend"
                name="password">
            </div>
            <span class="alert text-danger"
              *ngIf="userForm.controls['password'].invalid &&
              (userForm.controls['password'].dirty ||
              userForm.controls['password'].touched)">
              Campo inválido!
            </span>
          </div>
          <div class="col-md-3 mb-3">
            <label for="role">Permissão</label>
            <select class="form-control" id="role" formControlName="role">
              <option value="user">Usuário</option>
              <option value="admin">Admin</option>
            </select>
          </div>
        </div>
        <hr>
      </div>
      <button class="btn btn-primary" [disabled]="userForm.invalid"
        type="submit">Cadastrar</button>
    </form>
  </div>
</div>
<hr>


<div *ngIf="saveSuccess">
  <h4>Usuário inserido com sucesso!</h4>
  <!-- <button class="btn btn-success" (click)="newEmployee()">Add</button> -->
</div>

<div class="form-group">
  <p>Formulário enviado: {{formResult}}</p>
  <p>Formulário válido: {{userForm.get('name')!.valid}}</p>
</div>